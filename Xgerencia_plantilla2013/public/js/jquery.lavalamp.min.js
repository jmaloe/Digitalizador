(function($) {
$.fn.lavaLamp = function(o) {
    o = $.extend({ fx: "linear", speed: 500, click: function(){} }, o || {});

    return this.each(function() {
        var me = $(this), 
		noop = function(){},
            $back = $('<li class="back"></li>').appendTo(me),
            $li = $("li", this), 		
		  //  curr = $("li.current",this)[0]   ||   $($li[0]).addClass("current") [0];	
				curr = null;		
        $li.has('a').hover(function()
		 {			
            move(this);
           },noop);

       $(this).hover(noop, function() {		
	                     			 
	$back.animate({
               width: "0px"
               // left: "0px"
            }, o.speed, o.fx);        				 				 				 
	     });

        $li.has('a').click(function(e) {
             setCurr(this);					  
            return o.click.apply(this, [e, this]);
        });
		
        // setCurr(curr);    
	   
        function setCurr(el) {
            $back.css({ "left": el.offsetLeft+"px", "width": el.offsetWidth+"px" });
            curr = el;
        };		 
        function move(el) {
            $back.each(
			function() 
			   {
                  $(this).dequeue(); 
			   }
            ).animate({
               width: el.offsetWidth,
                left: el.offsetLeft
            }, o.speed, o.fx);
        };

    });
};
})(jQuery);
/*(function($)		  
    {			  
        $.fn.lavaLamp = function(o)
        {			  
            o=$.extend(
            {
                fx:"linear",
                speed:500,					  
                click:function(){} 
            }, o || {} );//se copia los datos del objeto 2 al objeto 1
            		                                
            return this.each(function()
            {
                var b = $(this),
                noop=function(){},
                
               $back = $('<li class="back"> <!--<div class="left"></div></li>').appendTo(b),
                           
               $li=$("li",this),
                
             //  curr = $("li.current",this)[0]   ||   $($li[0]).addClass("current") [0];
                curr = null;
			                 
                
                $li.not('.back').hover(
                function(){                    
                       move(this)
                    },noop);
									
                $(this).hover(noop,function(){                           
                       if(curr==null)
                           
                          $back.animate({
					width: "toggle"
					//opacity: "toggle"
				},500);	                                                      
                                                                                        
                     if(curr!=null)
                           move(curr); 
                                               
                    });
									
                $li.click(function(e){
                    setCurr(this);                 
                    return o.click.apply(this,[e,this]);
                    });													                 
                function setCurr(a){
                    $back.css(
                        {
                        "left":a.offsetLeft+"px",
                        "width":a.offsetWidth+"px"
                        });									
                    curr=a
                };									
                function move(a)
                {
                    $back.each(
                        function()
                        {
                            $(this).dequeue()
                            
                        }).animate(
                          {
                             width: a.offsetWidth,
                             left: a.offsetLeft
                          },
                        o.speed,
                        o.fx
                       );
                           
                          
               }
            });
        }
    })(jQuery);*/